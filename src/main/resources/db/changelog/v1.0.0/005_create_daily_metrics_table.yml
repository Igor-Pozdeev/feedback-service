databaseChangeLog:
  - changeSet:
      id: 005_create_daily_metrics_table.yml
      author: pozdeevIY
      changes:
        - createTable:
            tableName: daily_metrics
            remarks: Агрегированные ежедневные метрики
            columns:
              - column:
                  name: id
                  type: UUID
                  remarks: Идентификатор метрики
                  constraints:
                    primaryKey: true
              - column:
                  name: campaign_id
                  type: UUID
                  remarks: Идентификатор кампании
              - column:
                  name: date
                  type: DATE
                  remarks: Дата, за которую собрана метрика
              - column:
                  name: survey_type_code
                  type: VARCHAR
                  remarks: Код типа опроса
              - column:
                  name: total_responses
                  type: INT
                  remarks: Общее количество ответов
              - column:
                  name: score_value
                  type: DECIMAL(5, 2)
                  remarks: Значение метрики (NPS, CSAT, CES)
              - column:
                  name: promoters
                  type: INT
                  remarks: Количество "промоутеров" (только для NPS)
              - column:
                  name: passives
                  type: INT
                  remarks: Количество "пассивных" (только для NPS)
              - column:
                  name: detractors
                  type: INT
                  remarks: Количество "критиков" (только для NPS)
              - column:
                  name: create_time
                  type: TIMESTAMP
                  remarks: Время создания записи
                  defaultValueComputed: CURRENT_TIMESTAMP
              - column:
                  name: create_user
                  type: VARCHAR
                  remarks: Пользователь, создавший запись
              - column:
                  name: last_update_time
                  type: TIMESTAMP
                  remarks: Время последнего обновления
                  defaultValueComputed: CURRENT_TIMESTAMP
              - column:
                  name: last_update_user
                  type: VARCHAR
                  remarks: Пользователь, последний обновивший запись
